<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0040)http://backdrift.org/howtonetworkbonding -->
<HTML xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><HEAD profile="http://gmpg.org/xfn/11"><META http-equiv="Content-Type" content="text/html; charset=UTF-8">

<TITLE>How to configure network bonding in Linux | Backdrift</TITLE>
<LINK rel="stylesheet" href="./How to configure network bonding in Linux   Backdrift_files/style.css" type="text/css" media="screen"><LINK rel="alternate" type="application/rss+xml" title="Backdrift RSS Feed" href="http://backdrift.org/feed"><LINK rel="pingback" href="http://backdrift.org/xmlrpc.php">
<LINK rel="alternate" type="application/rss+xml" title="Backdrift &raquo; How to configure network bonding in Linux Comments Feed" href="http://backdrift.org/howtonetworkbonding/feed">
<LINK rel="EditURI" type="application/rsd+xml" title="RSD" href="http://backdrift.org/xmlrpc.php?rsd">
<LINK rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://backdrift.org/wp-includes/wlwmanifest.xml"> 
<LINK rel="index" title="Backdrift" href="http://backdrift.org/">
<LINK rel="start" title="Live Migration and Synchronous Replicated Storage With Xen, DRBD and LVM" href="http://backdrift.org/live-migration-and-synchronous-replicated-storage-with-xen-drbd-and-lvm">
<LINK rel="prev" title="Live Migration and Synchronous Replicated Storage With Xen, DRBD and LVM" href="http://backdrift.org/live-migration-and-synchronous-replicated-storage-with-xen-drbd-and-lvm">
<LINK rel="next" title="Creating a transparent SSH tunnel through a bastion host using the ProxyCommand configuration parameter" href="http://backdrift.org/transparent-proxy-with-ssh">
<META name="generator" content="WordPress 2.9.1">

<!-- All in One SEO Pack 1.6.10.2 by Michael Torbert of Semper Fi Web Design[303,373] -->
<META name="description" content="(Update: Feb 5, 2010 - I even more recently obtained a Cisco IOS switch and have included the configuration bits for IOS below.) I recently obtained a Dell">
<META name="keywords" content="bonding,centos,cisco,gentoo,ios,lacp,linux,networking,redhat">
<LINK rel="canonical" href="./How to configure network bonding in Linux   Backdrift_files/How to configure network bonding in Linux   Backdrift.htm">
<!-- /all in one seo pack -->

<LINK rel="stylesheet" href="./How to configure network bonding in Linux   Backdrift_files/wp-syntax.css" type="text/css" media="screen">
</HEAD><BODY>
<DIV id="block">
<DIV id="page">
<DIV id="header" class="single">	<A href="http://backdrift.org/">b a c k d r i f t</A>	<DIV class="description"></DIV>
</DIV>
<HR>

	<DIV id="content" class="narrowcolumn">


	
		<DIV class="post" id="post-12">
			<H2>How to configure network bonding in Linux</H2>
				<P>Tags: <A href="http://backdrift.org/tag/bonding" rel="tag">bonding</A>, <A href="http://backdrift.org/tag/centos" rel="tag">CentOS</A>, <A href="http://backdrift.org/tag/cisco" rel="tag">cisco</A>, <A href="http://backdrift.org/tag/gentoo" rel="tag">gentoo</A>, <A href="http://backdrift.org/tag/ios" rel="tag">ios</A>, <A href="http://backdrift.org/tag/lacp" rel="tag">lacp</A>, <A href="http://backdrift.org/tag/linux" rel="tag">linux</A>, <A href="http://backdrift.org/tag/networking" rel="tag">networking</A>, <A href="http://backdrift.org/tag/redhat" rel="tag">redhat</A></P>

			<DIV class="entry">
				<P><STRONG><EM>(Update: Feb 5, 2010 – I even more recently <A target="_top" id="AdBriteInlineAd_obtained" name="AdBriteInlineAd_obtained" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">obtained</A> a Cisco IOS <A target="_top" id="AdBriteInlineAd_switch" name="AdBriteInlineAd_switch" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">switch</A> and have included the configuration bits for IOS below.)</EM></STRONG></P>
<P>I recently obtained a Dell PowerConnect 5224 Gigabit switch which has the ability to combine multiple twisted-pair or fiber Ethernet links into one fault-tolerant and load balanced logical link. It also appears that its configuration syntax is very similar to that of a Cisco switch. In Linux this is called bonding, in <A target="_top" id="AdBriteInlineAd_switches" name="AdBriteInlineAd_switches" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">switches</A> its commonly referred to as a port channel. Either way, Its using the LACP (802.1ad) Protocol behind the scenes.</P>
<H2>Configuring the switch for LACP bonding</H2>
<HR>
<H3>Cisco IOS switch LACP configuration</H3>
<P>Enabling LACP across two ports in IOS is pretty straightforward.  The first thing to do is associate the ports with the channel-group.  This is good to do early so that when you <A target="_top" id="AdBriteInlineAd_apply" name="AdBriteInlineAd_apply" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">apply</A> switchport parameters to the Port-channel interface it automagically <A target="_top" id="AdBriteInlineAd_applies" name="AdBriteInlineAd_applies" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">applies</A> them to the GigabigEthernet interfaces.</P>
<P>Here are the relevant portions of my running configuration.</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">interface Port-channel2
 description LACP Channel for mk2
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 1,2
 switchport mode trunk
 spanning-tree portfast trunk
!
interface GigabitEthernet1/0/23
 description mk2 eth0
 switchport trunk encapsulation dot1q
 switchport mode trunk
 channel-group 2 mode active
!
interface GigabitEthernet1/0/24
 description mk2 eth1
 switchport trunk encapsulation dot1q
 switchport mode trunk
 channel-group 2 mode active
!</PRE></DIV></DIV>

<H3>Dell PowerConnect switch LACP configuration </H3>
<P>The Dell switch configuration is surprisingly easy.   A port-channel is automatically created when the Linux host brings up it’s bond interface(s). Just figure out which ports you want to use for your bond and enable LACP on them.  I used ports 1/23 and 1/24 (ports 23 &amp; 24 on switch 1).</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">Vty-0#config
Vty-0(config)#interface ethernet 1/23
Vty-0(config-if)#lacp
Vty-0(config-if)#exit
Vty-0(config)#interface ethernet 1/24
Vty-0(config-if)#lacp
Vty-0(config-if)#exit</PRE></DIV></DIV>

<P>’show run’ now indicates that the selected ports are LACP enabled.</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">Vty-0#show run
building running-config, please wait.....
...
!
interface ethernet 1/23
 switchport allowed vlan add 1 untagged
 switchport native vlan 1
 lacp
!
interface ethernet 1/24
 switchport allowed vlan add 1 untagged
 switchport native vlan 1
 lacp
!
...</PRE></DIV></DIV>

<P>At this point your port-channel will be down. Don’t worry, it will automagically come up when the Linux host brings up the bond interface. You can <A target="_top" id="AdBriteInlineAd_verify" name="AdBriteInlineAd_verify" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">verify</A> that its down by issuing the following:</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">Vty-0#show interfaces status port-channel 1
% Trunk 1 does not exist.</PRE></DIV></DIV>

<P>Note: This assumes you have no pre-existing port-channels, if you do have other port-channels configured you should iterate the port-channel number to be one more than the number of already defined port-channels.</P>
<P></P><CENTER><!-- Begin: AdBrite, Generated: 2010-04-22 2:24:18  -->
<SCRIPT type="text/javascript">
var AdBrite_Title_Color = '000000';
var AdBrite_Text_Color = '000000';
var AdBrite_Background_Color = 'FFFFFF';
var AdBrite_Border_Color = 'FFFFFF';
var AdBrite_URL_Color = '7F7F7F';
try{var AdBrite_Iframe=window.top!=window.self?2:1;var AdBrite_Referrer=document.referrer==''?document.location:document.referrer;AdBrite_Referrer=encodeURIComponent(AdBrite_Referrer);}catch(e){var AdBrite_Iframe='';var AdBrite_Referrer='';}
</SCRIPT>
<SPAN style="white-space:nowrap;"><SCRIPT type="text/javascript">document.write(String.fromCharCode(60,83,67,82,73,80,84));document.write(' src="http://ads.adbrite.com/mb/text_group.php?sid=1610990&zs=3436385f3630&ifr='+AdBrite_Iframe+'&ref='+AdBrite_Referrer+'" type="text/javascript">');document.write(String.fromCharCode(60,47,83,67,82,73,80,84,62));</SCRIPT><SCRIPT src="./How to configure network bonding in Linux   Backdrift_files/text_group.php" type="text/javascript"></SCRIPT>
<A onclick="javascript:pageTracker._trackPageview(&#39;/outgoing/www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&amp;afsid=1&#39;);" target="_top" href="http://www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&afsid=1"><IMG src="./How to configure network bonding in Linux   Backdrift_files/adbrite-your-ad-here-banner.gif" style="background-color:#FFFFFF;border:none;padding:0;margin:0;" alt="Your Ad Here" width="11" height="60" border="0"></A></SPAN>
<!-- End: AdBrite --></CENTER><P></P>
<H2>Configuring the Linux host for LACP bonding:</H2>
<HR>
<P>There are a few places where you define the parameters of the bond. The kernel module defies the protocol, frequency and other attributes of the low-level bond channel configuration. The command ifenslave will create a bond device and allow you to manage the Ethernet devices within it (add/remove,etc.). Finally the network <A target="_top" id="AdBriteInlineAd_address" name="AdBriteInlineAd_address" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">address</A> configuration is handled by ifconfig, consistent with most other network interfaces in Linux. Luckily most of this is taken care of automatically by the networking init scripts.</P>
<H3>Linux Kernel Module Configuration</H3>
<HR>
<P>LACP is referred to in linux as bonding mode 4, so we need to inform the kernel module to use this bonding mode. We’ll also pass it a few other parameters like the frequency of which to scan for changes in status.</P>
<P>Add the following to your module config file, in gentoo this is /etc/modules.autoload.d/kernel-2.6. This will pass the following options to the kernel module the next time it is inserted.</P>
<H3>Red Hat and CentOS Kernel Module Configuration</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/modprobe.conf</SPAN>
&nbsp;
<SPAN style="color: #7a0874; font-weight: bold;">alias</SPAN> bond0 bonding
options bond0 <SPAN style="color: #007800;">miimon</SPAN>=<SPAN style="color: #000000;">100</SPAN> <SPAN style="color: #007800;">mode</SPAN>=<SPAN style="color: #000000;">4</SPAN> <SPAN style="color: #007800;">lacp_rate</SPAN>=<SPAN style="color: #000000;">1</SPAN></PRE></DIV></DIV>

<H3>Gentoo Kernel Module Setup</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/modules.autoload.d/kernel-2.6</SPAN>
&nbsp;
bonding <SPAN style="color: #007800;">miimon</SPAN>=<SPAN style="color: #000000;">100</SPAN> <SPAN style="color: #007800;">mode</SPAN>=<SPAN style="color: #000000;">4</SPAN> <SPAN style="color: #007800;">lacp_rate</SPAN>=<SPAN style="color: #000000;">1</SPAN></PRE></DIV></DIV>

<H2>Linux Network Configuration</H2>
<HR>
<H3>Red Hat and CentOS Network Setup</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/sysconfig/network-scripts/ifcfg-eth0</SPAN>
&nbsp;
<SPAN style="color: #007800;">DEVICE</SPAN>=eth0
<SPAN style="color: #007800;">ONBOOT</SPAN>=<SPAN style="color: #c20cb9; font-weight: bold;">yes</SPAN>
<SPAN style="color: #007800;">BOOTPROTO</SPAN>=none
<SPAN style="color: #007800;">USERCTL</SPAN>=no
<SPAN style="color: #007800;">MASTER</SPAN>=bond0
<SPAN style="color: #007800;">SLAVE</SPAN>=<SPAN style="color: #c20cb9; font-weight: bold;">yes</SPAN></PRE></DIV></DIV>


<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/sysconfig/network-scripts/ifcfg-eth1</SPAN>
&nbsp;
<SPAN style="color: #007800;">DEVICE</SPAN>=eth1
<SPAN style="color: #007800;">ONBOOT</SPAN>=<SPAN style="color: #c20cb9; font-weight: bold;">yes</SPAN>
<SPAN style="color: #007800;">BOOTPROTO</SPAN>=none
<SPAN style="color: #007800;">USERCTL</SPAN>=no
<SPAN style="color: #007800;">MASTER</SPAN>=bond0
<SPAN style="color: #007800;">SLAVE</SPAN>=<SPAN style="color: #c20cb9; font-weight: bold;">yes</SPAN></PRE></DIV></DIV>


<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/sysconfig/network-scripts/ifcfg-bond0</SPAN>
&nbsp;
<SPAN style="color: #007800;">DEVICE</SPAN>=bond0
<SPAN style="color: #007800;">IPADDR</SPAN>=10.0.0.80
<SPAN style="color: #007800;">NETMASK</SPAN>=255.255.255.0
<SPAN style="color: #007800;">BROADCAST</SPAN>=10.0.0.255
<SPAN style="color: #007800;">GATEWAY</SPAN>=10.0.0.1
<SPAN style="color: #007800;">ONBOOT</SPAN>=<SPAN style="color: #c20cb9; font-weight: bold;">yes</SPAN>
<SPAN style="color: #007800;">BOOTPROTO</SPAN>=none
<SPAN style="color: #007800;">USERCTL</SPAN>=no</PRE></DIV></DIV>

<H3>Gentoo Network Setup</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;"><SPAN style="color: #666666; font-style: italic;">#/etc/conf.d/net</SPAN>
&nbsp;
<SPAN style="color: #007800;">config_eth0</SPAN>=<SPAN style="color: #7a0874; font-weight: bold;">(</SPAN> <SPAN style="color: #ff0000;">"null"</SPAN> <SPAN style="color: #7a0874; font-weight: bold;">)</SPAN>
<SPAN style="color: #007800;">config_eth1</SPAN>=<SPAN style="color: #7a0874; font-weight: bold;">(</SPAN> <SPAN style="color: #ff0000;">"null"</SPAN> <SPAN style="color: #7a0874; font-weight: bold;">)</SPAN>
&nbsp;
<SPAN style="color: #007800;">slaves_bond0</SPAN>=<SPAN style="color: #ff0000;">"eth0 eth1"</SPAN>
&nbsp;
<SPAN style="color: #007800;">config_bond0</SPAN>=<SPAN style="color: #7a0874; font-weight: bold;">(</SPAN> <SPAN style="color: #ff0000;">"10.0.0.80/24"</SPAN> <SPAN style="color: #7a0874; font-weight: bold;">)</SPAN></PRE></DIV></DIV>

<P>We also need to create a symlink in /etc/init.d for the new bond0 interface and turn off eth0 as it is controlled by the bond now. The following will disable eth0 and enable bond0 on boot.</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;">  <SPAN style="color: #7a0874; font-weight: bold;">cd</SPAN> <SPAN style="color: #000000; font-weight: bold;">/</SPAN>etc<SPAN style="color: #000000; font-weight: bold;">/</SPAN>init.d
  <SPAN style="color: #c20cb9; font-weight: bold;">ln</SPAN> <SPAN style="color: #660033;">-s</SPAN> net.lo net.bond0
  rc-update del eth0 default
  rc-update add bond0 default</PRE></DIV></DIV>

<P>Now you can bring up the bond interface.</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="bash" style="font-family:monospace;">  <SPAN style="color: #000000; font-weight: bold;">/</SPAN>etc<SPAN style="color: #000000; font-weight: bold;">/</SPAN>init.d<SPAN style="color: #000000; font-weight: bold;">/</SPAN>net.bond0 start</PRE></DIV></DIV>

<P></P><CENTER><!-- Begin: AdBrite, Generated: 2010-04-22 2:24:18  -->
<SCRIPT type="text/javascript">
var AdBrite_Title_Color = '000000';
var AdBrite_Text_Color = '000000';
var AdBrite_Background_Color = 'FFFFFF';
var AdBrite_Border_Color = 'FFFFFF';
var AdBrite_URL_Color = '7F7F7F';
try{var AdBrite_Iframe=window.top!=window.self?2:1;var AdBrite_Referrer=document.referrer==''?document.location:document.referrer;AdBrite_Referrer=encodeURIComponent(AdBrite_Referrer);}catch(e){var AdBrite_Iframe='';var AdBrite_Referrer='';}
</SCRIPT>
<SPAN style="white-space:nowrap;"><SCRIPT type="text/javascript">document.write(String.fromCharCode(60,83,67,82,73,80,84));document.write(' src="http://ads.adbrite.com/mb/text_group.php?sid=1610990&zs=3436385f3630&ifr='+AdBrite_Iframe+'&ref='+AdBrite_Referrer+'" type="text/javascript">');document.write(String.fromCharCode(60,47,83,67,82,73,80,84,62));</SCRIPT><SCRIPT src="./How to configure network bonding in Linux   Backdrift_files/text_group.php" type="text/javascript"></SCRIPT><IFRAME name="AdBriteFrame_42f69877_a32f_4e58_9473_8944e1e24cbb" width="468" height="60" frameborder="0" scrolling="no"></IFRAME><SCRIPT type="text/javascript"><!--
AdBriteRender_42f69877_a32f_4e58_9473_8944e1e24cbb();
//--></SCRIPT><SPAN id="adbriteinline_450410545" name="undefined"><SCRIPT src="./How to configure network bonding in Linux   Backdrift_files/select_keywords" type="text/javascript"></SCRIPT></SPAN>
<A onclick="javascript:pageTracker._trackPageview(&#39;/outgoing/www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&amp;afsid=1&#39;);" target="_top" href="http://www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&afsid=1"><IMG src="./How to configure network bonding in Linux   Backdrift_files/adbrite-your-ad-here-banner.gif" style="background-color:#FFFFFF;border:none;padding:0;margin:0;" alt="Your Ad Here" width="11" height="60" border="0"></A></SPAN>
<!-- End: AdBrite --></CENTER><P></P>
<H2>Checking the Status of the bonded interface</H2>
<HR>
<P>You can check the status of your bond now from within Linux by using the /proc and /sys interfaces into the Linux bond driver.</P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">$ cat /proc/net/bonding/bond0  
&nbsp;
Ethernet Channel Bonding Driver: v3.1.1 (September 26, 2006)
&nbsp;
Bonding Mode: IEEE 802.3ad Dynamic link aggregation
Transmit Hash Policy: layer2 (0)
MII Status: up
MII Polling Interval (ms): 100
Up Delay (ms): 0
Down Delay (ms): 0
&nbsp;
802.3ad info
LACP rate: fast
Active Aggregator Info:
	Aggregator ID: 1
	Number of ports: 2
	Actor Key: 17
	Partner Key: 1
	Partner Mac Address: 00:77:54:71:a8:6f
&nbsp;
Slave Interface: eth0
MII Status: up
Link Failure Count: 0
<A target="_top" id="AdBriteInlineAd_Permanent" name="AdBriteInlineAd_Permanent" style="cursor: pointer; color: rgb(0, 102, 0); text-decoration: none; background-image: url(http://files.adbrite.com/mb/images/green-double-underline-006600.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; margin-bottom: -2px; padding-bottom: 2px; background-position: 50% 100%; background-repeat: repeat no-repeat; ">Permanent</A> HW addr: 00:99:97:60:9d:48
Aggregator ID: 1
&nbsp;
Slave Interface: eth1
MII Status: up
Link Failure Count: 0
Permanent HW addr: 00:00:85:60:9d:49
Aggregator ID: 1</PRE></DIV></DIV>

<P>You can check the bond from the switch.</P>
<H3>Cisco IOS</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">Switch#show interfaces Port-channel 2
Port-channel2 is up, line protocol is up (connected)
  Hardware is EtherChannel, address is 001b.0dbf.ba17 (bia 001b.0dbf.ba17)
  Description: LACP Channel for mk2
  MTU 1500 bytes, BW 2000000 Kbit, DLY 10 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Full-duplex, 1000Mb/s, link type is auto, media type is unknown
  input flow-control is off, output flow-control is unsupported 
  Members in this channel: Gi1/0/23 Gi1/0/24 
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 1d23h, output 00:00:01, output hang never
  Last clearing of "show interface" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 5000 bits/sec, 7 packets/sec
     1060041 packets input, 193406916 bytes, 0 no buffer
     Received 18241 broadcasts (0 multicast)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 11873 multicast, 0 pause input
     0 input packets with dribble condition detected
     3181997 packets output, 2735804051 bytes, 0 underruns
     0 output errors, 0 collisions, 1 interface resets
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 PAUSE output
     0 output buffer failures, 0 output buffers swapped out</PRE></DIV></DIV>

<H3>Dell PowerConnect:</H3>
<P></P>

<DIV class="wp_syntax"><DIV class="code"><PRE class="none" style="font-family:monospace;">Vty-0#show interfaces status port-channel 1
Information of Trunk 1
 Basic information: 
  Port type: 1000t
  Mac address: 00-30-F1-71-A8-82
 Configuration: 
  Name: 
  Port admin: Up
  Speed-duplex: Auto
  Capabilities: 10half, 10full, 100half, 100full, 1000full, 
  Flow control: Disabled
 Current status: 
  Created by: Lacp
  Link status: Up
  Port operation status: Up
  Operation speed-duplex: 1000full
  Flow control type: None
  Member Ports: Eth1/23, Eth1/24,</PRE></DIV></DIV>

<P>That’s is all the configuration work that I needed to perform, I hope it saves you time (I spent a while digging through dell’s site and the linux kernel docs to find the right combination of options). Please, let me know if you had troubles with these directions or if you have questions. keith (at) backdrift.org</P>
<P></P><CENTER><!-- Begin: AdBrite, Generated: 2010-04-22 2:24:18  -->
<SCRIPT type="text/javascript">
var AdBrite_Title_Color = '000000';
var AdBrite_Text_Color = '000000';
var AdBrite_Background_Color = 'FFFFFF';
var AdBrite_Border_Color = 'FFFFFF';
var AdBrite_URL_Color = '7F7F7F';
try{var AdBrite_Iframe=window.top!=window.self?2:1;var AdBrite_Referrer=document.referrer==''?document.location:document.referrer;AdBrite_Referrer=encodeURIComponent(AdBrite_Referrer);}catch(e){var AdBrite_Iframe='';var AdBrite_Referrer='';}
</SCRIPT>
<SPAN style="white-space:nowrap;"><SCRIPT type="text/javascript">document.write(String.fromCharCode(60,83,67,82,73,80,84));document.write(' src="http://ads.adbrite.com/mb/text_group.php?sid=1610990&zs=3436385f3630&ifr='+AdBrite_Iframe+'&ref='+AdBrite_Referrer+'" type="text/javascript">');document.write(String.fromCharCode(60,47,83,67,82,73,80,84,62));</SCRIPT><SCRIPT src="./How to configure network bonding in Linux   Backdrift_files/text_group.php" type="text/javascript"></SCRIPT><IFRAME name="AdBriteFrame_08257163_6bff_457a_b22c_487170142130" width="468" height="60" frameborder="0" scrolling="no"></IFRAME><SCRIPT type="text/javascript"><!--
AdBriteRender_08257163_6bff_457a_b22c_487170142130();
//--></SCRIPT>
<A onclick="javascript:pageTracker._trackPageview(&#39;/outgoing/www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&amp;afsid=1&#39;);" target="_top" href="http://www.adbrite.com/mb/commerce/purchase_form.php?sid=1610990&afsid=1"><IMG src="./How to configure network bonding in Linux   Backdrift_files/adbrite-your-ad-here-banner.gif" style="background-color:#FFFFFF;border:none;padding:0;margin:0;" alt="Your Ad Here" width="11" height="60" border="0"></A></SPAN>
<!-- End: AdBrite --></CENTER><P></P>
<BR><A onclick="javascript:pageTracker._trackPageview(&#39;/outgoing/www.socialmarker.com/?link=http://backdrift.org/howtonetworkbonding&amp;title=How+to+configure+network+bonding+in+Linux&amp;text=%28Update%3A+Feb+5%2C+2010+%26%238211%3B+I+even+more+recently+obtained+a+Cisco+IOS+switch+and+have+included+the+configuration+bits+for+IOS+below.%29+I+recently+obtained+a+Dell+PowerConnect+5224+Gigabit+switch...&amp;tags=the+bond%2C+linux+host%2C+cisco+ios%2C+configuration%2C+linux%2C+switch%2C+module%2C+kernel%2C+ports%2C+interface&#39;);" href="http://www.socialmarker.com/?link=http://backdrift.org/howtonetworkbonding&title=How+to+configure+network+bonding+in+Linux&text=%28Update%3A+Feb+5%2C+2010+%26%238211%3B+I+even+more+recently+obtained+a+Cisco+IOS+switch+and+have+included+the+configuration+bits+for+IOS+below.%29+I+recently+obtained+a+Dell+PowerConnect+5224+Gigabit+switch...&tags=the+bond%2C+linux+host%2C+cisco+ios%2C+configuration%2C+linux%2C+switch%2C+module%2C+kernel%2C+ports%2C+interface" target="_blank"><IMG src="./How to configure network bonding in Linux   Backdrift_files/bookmark.gif" border="0"></A><NOSCRIPT></NOSCRIPT>
				
				<P class="postmetadata alt">
					<SMALL>
						This entry was posted
												on Friday, March 13th, 2009 at 9:45 pm						and is filed under <A href="http://backdrift.org/category/uncategorized" title="View all posts in Uncategorized" rel="category tag">Uncategorized</A>.
						You can follow any responses to this entry through the <A href="http://backdrift.org/howtonetworkbonding/feed">RSS 2.0</A> feed.

													You can <A href="http://backdrift.org/howtonetworkbonding#respond">leave a response</A>, or <A href="http://backdrift.org/howtonetworkbonding/trackback" rel="trackback">trackback</A> from your own site.

						
					</SMALL>
				</P>

			</DIV>

		</DIV>

	
<!-- You can start editing here. -->


			<!-- If comments are open, but there are no comments. -->

	 


<H3 id="respond">Join the Conversation</H3>


<FORM action="http://backdrift.org/wp-comments-post.php" method="post" id="commentform">


<P><INPUT type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required="true">
<LABEL for="author"><SMALL>Name (required)</SMALL></LABEL></P>

<P><INPUT type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true">
<LABEL for="email"><SMALL>Mail (will not be published) (required)</SMALL></LABEL></P>

<P><INPUT type="text" name="url" id="url" value="" size="22" tabindex="3">
<LABEL for="url"><SMALL>Website</SMALL></LABEL></P>


<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre lang=&quot;&quot; line=&quot;&quot; escaped=&quot;&quot;&gt; </code></small></p>-->

<P><TEXTAREA name="comment" id="comment" cols="100%" rows="10" tabindex="4"></TEXTAREA></P>

<P><INPUT name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment">
<INPUT type="hidden" name="comment_post_ID" value="12">
</P>

</FORM>



	
	</DIV>

<DIV id="sidebar">		
	<UL>			
	<LI id="simpletags-3" class="widget widget-simpletags"><H2 class="widgettitle">Tag cloud</H2>
<!-- Generated by Simple Tags 1.7.4.4 - http://wordpress.org/extend/plugins/simple-tags -->
	<DIV class="st-tag-cloud">
	<A href="http://backdrift.org/tag/rhel" id="tag-link-39" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">RHEL</A>
<A href="http://backdrift.org/tag/multipath" id="tag-link-46" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">Multipath</A>
<A href="http://backdrift.org/tag/replication" id="tag-link-52" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">replication</A>
<A href="http://backdrift.org/tag/grub" id="tag-link-40" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">Grub</A>
<A href="http://backdrift.org/tag/alerts" id="tag-link-54" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">alerts</A>
<A href="http://backdrift.org/tag/hosting" id="tag-link-45" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">Hosting</A>
<A href="http://backdrift.org/tag/ssh" id="tag-link-22" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">ssh</A>
<A href="http://backdrift.org/tag/monitoring" id="tag-link-55" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">monitoring</A>
<A href="http://backdrift.org/tag/scalability" id="tag-link-18" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">scalability</A>
<A href="http://backdrift.org/tag/unison" id="tag-link-50" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">unison</A>
<A href="http://backdrift.org/tag/high-availability" id="tag-link-17" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">high availability</A>
<A href="http://backdrift.org/tag/drbd" id="tag-link-13" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">drbd</A>
<A href="http://backdrift.org/tag/xen" id="tag-link-7" class="st-tags t4" title="6 topics" rel="tag" style="font-size:11.33pt; color:#888888;">Xen</A>
<A href="http://backdrift.org/tag/virtualization" id="tag-link-8" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">Virtualization</A>
<A href="http://backdrift.org/tag/fix" id="tag-link-31" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">fix</A>
<A href="http://backdrift.org/tag/linux" id="tag-link-5" class="st-tags t10" title="16 topics" rel="tag" style="font-size:14pt; color:#000000;">linux</A>
<A href="http://backdrift.org/tag/initrd" id="tag-link-29" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">initrd</A>
<A href="http://backdrift.org/tag/systems-administration" id="tag-link-20" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">systems administration</A>
<A href="http://backdrift.org/tag/vps" id="tag-link-44" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">VPS</A>
<A href="http://backdrift.org/tag/sysadmin" id="tag-link-34" class="st-tags t3" title="5 topics" rel="tag" style="font-size:10.89pt; color:#9e9e9e;">sysadmin</A>
<A href="http://backdrift.org/tag/rhel3" id="tag-link-28" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">rhel3</A>
<A href="http://backdrift.org/tag/iscsi" id="tag-link-47" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">iSCSI</A>
<A href="http://backdrift.org/tag/networking" id="tag-link-4" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">networking</A>
<A href="http://backdrift.org/tag/gentoo" id="tag-link-21" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">gentoo</A>
<A href="http://backdrift.org/tag/backup" id="tag-link-24" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">backup</A>
<A href="http://backdrift.org/tag/alerting" id="tag-link-53" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">alerting</A>
<A href="http://backdrift.org/tag/infrastructure" id="tag-link-19" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">infrastructure</A>
<A href="http://backdrift.org/tag/ldap" id="tag-link-33" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">ldap</A>
<A href="http://backdrift.org/tag/kernel" id="tag-link-30" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">kernel</A>
<A href="http://backdrift.org/tag/pvgrub" id="tag-link-41" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">PVGrub</A>
<A href="http://backdrift.org/tag/ha" id="tag-link-6" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">HA</A>
<A href="http://backdrift.org/tag/centos" id="tag-link-38" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">CentOS</A>
<A href="http://backdrift.org/tag/ubuntu" id="tag-link-60" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">ubuntu</A>
<A href="http://backdrift.org/tag/lvm" id="tag-link-14" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">lvm</A>
<A href="http://backdrift.org/tag/redhat" id="tag-link-27" class="st-tags t4" title="6 topics" rel="tag" style="font-size:11.33pt; color:#888888;">redhat</A>
<A href="http://backdrift.org/tag/hp" id="tag-link-43" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">HP</A>
<A href="http://backdrift.org/tag/rsync" id="tag-link-51" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">rsync</A>
<A href="http://backdrift.org/tag/unix" id="tag-link-16" class="st-tags t4" title="6 topics" rel="tag" style="font-size:11.33pt; color:#888888;">unix</A>
<A href="http://backdrift.org/tag/ilo" id="tag-link-42" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">iLO</A>
<A href="http://backdrift.org/tag/storage" id="tag-link-10" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">storage</A>
<A href="http://backdrift.org/tag/syslog" id="tag-link-49" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">syslog</A>
<A href="http://backdrift.org/tag/bash" id="tag-link-48" class="st-tags t1" title="2 topics" rel="tag" style="font-size:10pt; color:#cccccc;">bash</A>
<A href="http://backdrift.org/tag/monitor" id="tag-link-56" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">monitor</A>
<A href="http://backdrift.org/tag/debian" id="tag-link-37" class="st-tags t2" title="3 topics" rel="tag" style="font-size:10.44pt; color:#b5b5b5;">Debian</A>
<A href="http://backdrift.org/tag/pam" id="tag-link-32" class="st-tags t1" title="1 topics" rel="tag" style="font-size:10pt; color:#cccccc;">pam</A></DIV>

</LI><LI id="text-2" class="widget widget_text">			<DIV class="textwidget"><H2 class="widgettitle"><A href="http://feeds.feedburner.com/Backdrift" rel="alternate" type="application/rss+xml"><IMG src="./How to configure network bonding in Linux   Backdrift_files/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"></A>&nbsp;<A href="http://feeds.feedburner.com/Backdrift" rel="alternate" type="application/rss+xml">Subscribe to Feed</A></H2></DIV>
		</LI>		<LI id="recent-posts-3" class="widget widget_recent_entries">		<H2 class="widgettitle">Recent Posts</H2>		<UL>
				<LI><A href="http://backdrift.org/automounting-iscsi-with-autofs" title="Automounting iSCSI with Autofs">Automounting iSCSI with Autofs </A></LI>
				<LI><A href="http://backdrift.org/simple-apache-firewall-using-mod_rewrite" title="Simple Apache Firewall Using mod_rewrite">Simple Apache Firewall Using mod_rewrite </A></LI>
				<LI><A href="http://backdrift.org/efficient-xen-backups-using-lvm-and-rsnapshot" title="Efficient Xen Backups Using LVM and Rsnapshot">Efficient Xen Backups Using LVM and Rsnapshot </A></LI>
				<LI><A href="http://backdrift.org/hardware-vs-software-raid-in-the-real-world-2" title="Hardware vs. Software RAID in the Real World">Hardware vs. Software RAID in the Real World </A></LI>
				<LI><A href="http://backdrift.org/fixing-mac-osx-file-permissions-and-acls-from-the-command-line" title="Fixing Mac OSX File Permissions and ACLs From the Command Line">Fixing Mac OSX File Permissions and ACLs From the Command Line </A></LI>
				</UL>
		</LI><LI id="twitter-3" class="widget widget_twitter"><DIV><H2 class="widgettitle"><A class="twitterwidget twitterwidget-title" title="Twitter: tweetinkeith" href="http://twitter.com/tweetinkeith" target="_blank">Twitter: tweetinkeith</A></H2><UL><LI class="wpTwitterWidgetError">Could not connect to Twitter</LI></UL></DIV></LI>		</UL>
		</DIV>

</DIV>
<HR>
<DIV id="footer">
	<P>
		Backdrift 2010, page generated in 3.659 seconds.
	</P>
</DIV>
<!-- Evolution in theme design -->
		
<!-- tracker added by Ultimate Google Analytics plugin v1.6.0: http://www.oratransplant.nl/uga -->
<SCRIPT type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT><SCRIPT src="./How to configure network bonding in Linux   Backdrift_files/ga.js" type="text/javascript"></SCRIPT>
<SCRIPT type="text/javascript">
var pageTracker = _gat._getTracker("UA-3080124-1");
pageTracker._initData();
pageTracker._trackPageview();
</SCRIPT>
		<!-- Advertising Manager v3.4.17 (3.660 seconds.) -->
</DIV> <!-- End div for #block -->



<!-- Dynamic page generated in 3.650 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2010-05-12 13:15:18 -->
<!-- super cache --><ISPAN class="noadbriteinline" id="adbrite_inline_div" style="position: absolute; z-index: 32766; width: 310px; height: 284px; overflow-x: hidden; overflow-y: hidden; background-image: url(http://files.adbrite.com/mb/images/ab_inline_background.gif); background-color: rgb(226, 226, 226); border-top-color: rgb(170, 170, 170); border-right-color: rgb(170, 170, 170); border-bottom-color: rgb(170, 170, 170); border-left-color: rgb(170, 170, 170); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; opacity: 1; text-align: left; display: none; left: 591px; top: 255px; background-position: 50% 0%; background-repeat: repeat no-repeat; "><ISPAN style="display: inline; white-space: nowrap; position: absolute; top: 9px; right: 14px; width: 40px; cursor: pointer; font-size: 14px; line-height: 14px; ">&nbsp;</ISPAN><ISPAN style="width: 10px; height: 11px; background-image: url(http://files.adbrite.com/mb/images/ab_inline_question.gif); color: rgb(255, 255, 255); position: absolute; font-family: Arial, Helvetica, sans-serif; top: 10px; right: 20px; cursor: pointer; background-repeat: no-repeat no-repeat; "></ISPAN><ISPAN style="width: 10px; height: 11px; background-image: url(http://files.adbrite.com/mb/images/ab_inline_close.gif); color: rgb(255, 255, 255); position: absolute; font-family: Arial, Helvetica, sans-serif; top: 10px; right: 6px; cursor: pointer; background-repeat: no-repeat no-repeat; "></ISPAN><ISPAN style="font-size: 11px; font-weight: bold; color: rgb(255, 255, 255); display: block; font-family: Arial, Helvetica, sans-serif; margin-left: 120px; margin-top: 8px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Advertisement</ISPAN><ISPAN style="display: block; width: 276px; "><A id="adbrite-inline-target-url" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; color: rgb(0, 0, 0); font-weight: normal; text-decoration: none; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: transparent; cursor: pointer; position: relative; top: 33px; left: 24px; background-position: initial initial; background-repeat: initial initial; "><ISPAN id="adbrite-inline-headline" style="font-size: 20px; font-family: Arial, Helvetica, sans-serif; font-weight: bold; color: rgb(0, 0, 255); text-decoration: underline; white-space: nowrap; "></ISPAN><BR><ISPAN id="adbrite-inline-adtext" style="font-size: 13px; line-height: 15px; font-family: Verdana, Arial, Helvetica, sans-serif; "></ISPAN><BR><ISPAN id="adbrite-inline-display-url" style="font-size: 11px; line-height: 18px; font-family: Verdana, Arial, Helvetica, sans-serif; text-decoration: underline; color: rgb(0, 128, 0); "></ISPAN></A></ISPAN><ISPAN style="background-image: url(http://files.adbrite.com/mb/images/ab_inline_logo.gif); width: 90px; height: 17px; position: absolute; top: 4px; left: 4px; cursor: pointer; background-repeat: no-repeat no-repeat; "></ISPAN></ISPAN><ISPAN id="ab_pointer" style="width: 44px; height: 30px; position: absolute; z-index: 32767; top: 227px; left: 611px; background-image: url(http://files.adbrite.com/mb/images/ab_inline_pointer_top_left.gif); display: none; background-position: 0% 0%; background-repeat: no-repeat no-repeat; "></ISPAN></BODY></HTML>